generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
}

enum Answer {
  YES
  NO
}

model Respondent {
  email      String
  name       String
  askedBy    String?
  selfieData String?                @db.Text
  createdAt  DateTime              @default(now())
  updatedAt  DateTime              @updatedAt
  responses  InteractionResponse[]

  @@id([email, name])
}

model InteractionResponse {
  id              String     @id @default(cuid())
  questionKey     String
  questionText    String
  askedBy         String?
  selfieData      String?    @db.Text
  answer          Answer
  createdAt       DateTime   @default(now())
  respondentEmail String
  respondentName  String
  userAgent       String?
  ipAddress       String?
  respondent      Respondent @relation(fields: [respondentEmail, respondentName], references: [email, name], onDelete: Cascade)

  @@index([respondentEmail, respondentName])
  @@index([createdAt])
}
